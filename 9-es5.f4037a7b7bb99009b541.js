!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{ANty:function(e,a,c){"use strict";c.r(a),c.d(a,"LocationsModule",(function(){return ut}));var i,r=c("ofXK"),o=c("PCNd"),s=c("tyNb"),l=c("XNiG"),b=c("Kj3r"),f=c("02Lk"),d=c("TwVa"),m=c("iFvM"),u=c("Ns9j"),p=c("ub1J"),h=c("fXoL"),g=c("l7P3"),I=c("0IaG"),S=c("3Pt+"),C=c("sYmb"),O=c("Wp6s"),D=c("bTqV"),T=c("/2Tz"),v=((i=function(){function e(n){t(this,e),this.translate=n,this.FORM_GROUP_ID=d.e.FORM_LOCATIONS_FILTER_ID,this.initialModel={},this.form=new S.h({}),this.fields=[],this.options={}}return n(e,[{key:"ngOnInit",value:function(){this.initForm()}},{key:"resetFilter",value:function(){this.form.patchValue({name:void 0,type:void 0,dimension:void 0})}},{key:"initForm",value:function(){this.fields=[{fieldGroupClassName:"flex-container no-margin no-padding",fieldGroup:[{key:"name",type:"input",className:"flex-25",templateOptions:{floatLabel:"always",label:this.translate.instant("LOCATIONS.FIELDS.NAME")}},{key:"type",type:"input",className:"flex-25",templateOptions:{floatLabel:"always",label:this.translate.instant("LOCATIONS.FIELDS.TYPE")}},{key:"dimension",type:"input",className:"flex-25",templateOptions:{floatLabel:"always",label:this.translate.instant("LOCATIONS.FIELDS.DIMENSION")}}]}]}}]),e}()).\u0275fac=function(t){return new(t||i)(h.Ob(C.d))},i.\u0275cmp=h.Ib({type:i,selectors:[["app-locations-filter-form"]],decls:10,vars:12,consts:[["mat-button","",3,"click"],[3,"formId","form","fields","initialModel","options","filter"]],template:function(t,e){1&t&&(h.Ub(0,"mat-card"),h.Ub(1,"mat-card-header"),h.Ub(2,"mat-card-title"),h.Fc(3),h.hc(4,"translate"),h.Tb(),h.Ub(5,"button",0),h.cc("click",(function(){return e.resetFilter()})),h.Fc(6),h.hc(7,"translate"),h.Tb(),h.Tb(),h.Ub(8,"mat-card-content"),h.Pb(9,"app-dynamic-form",1),h.Tb(),h.Tb()),2&t&&(h.Cb(3),h.Gc(h.ic(4,8,"LOCATIONS.FILTER_LOCATIONS")),h.Cb(3),h.Gc(h.ic(7,10,"FORMS.CLEAR_FILTER")),h.Cb(3),h.mc("formId",e.FORM_GROUP_ID)("form",e.form)("fields",e.fields)("initialModel",e.initialModel)("options",e.options)("filter",!0))},directives:[O.a,O.d,O.g,D.b,O.c,T.a],pipes:[C.c],styles:[".mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:16px}.mat-card[_ngcontent-%COMP%]{margin:0}"],changeDetection:0}),i),y=c("bv9b"),L=c("+0xr"),F=c("5/t5"),N=c("M9IT");function E(t,e){1&t&&h.Pb(0,"mat-progress-bar",2)}function R(t,e){if(1&t&&(h.Sb(0),h.Dc(1,E,1,0,"mat-progress-bar",1),h.Rb()),2&t){var n=e.ngIf,a=h.gc();h.Cb(1),h.mc("ngIf",n===a.dataStateTypes.LOADING||n===a.dataStateTypes.REFRESHING)}}function w(t,e){1&t&&(h.Ub(0,"th",17),h.Fc(1),h.hc(2,"translate"),h.Tb()),2&t&&(h.Cb(1),h.Gc(h.ic(2,1,"LOCATIONS.FIELDS.NUM")))}var U=function(t){return["/locations",t]};function P(t,e){if(1&t&&(h.Ub(0,"td",18),h.Fc(1),h.Tb()),2&t){var n=e.$implicit;h.mc("routerLink",h.pc(2,U,n.id)),h.Cb(1),h.Hc(" ",n.id," ")}}function k(t,e){1&t&&(h.Ub(0,"th",17),h.Fc(1),h.hc(2,"translate"),h.Tb()),2&t&&(h.Cb(1),h.Gc(h.ic(2,1,"LOCATIONS.FIELDS.NAME")))}function A(t,e){if(1&t&&(h.Ub(0,"td",18),h.Fc(1),h.Tb()),2&t){var n=e.$implicit;h.mc("routerLink",h.pc(2,U,n.id)),h.Cb(1),h.Hc(" ",n.name," ")}}function $(t,e){1&t&&(h.Ub(0,"th",17),h.Fc(1),h.hc(2,"translate"),h.Tb()),2&t&&(h.Cb(1),h.Gc(h.ic(2,1,"LOCATIONS.FIELDS.TYPE")))}function M(t,e){if(1&t&&(h.Ub(0,"td",19),h.Fc(1),h.Tb()),2&t){var n=e.$implicit;h.Cb(1),h.Gc(n.type)}}function G(t,e){1&t&&(h.Ub(0,"th",17),h.Fc(1),h.hc(2,"translate"),h.Tb()),2&t&&(h.Cb(1),h.Gc(h.ic(2,1,"LOCATIONS.FIELDS.DIMENSION")))}function _(t,e){if(1&t&&(h.Ub(0,"td",19),h.Fc(1),h.Tb()),2&t){var n=e.$implicit;h.Cb(1),h.Gc(n.dimension)}}function H(t,e){1&t&&(h.Ub(0,"th",17),h.Fc(1),h.hc(2,"translate"),h.Tb()),2&t&&(h.Cb(1),h.Gc(h.ic(2,1,"LOCATIONS.FIELDS.RESIDENTS")))}var j=function(t){return{number:t}};function x(t,e){if(1&t){var n=h.Vb();h.Ub(0,"td",19),h.Ub(1,"button",20),h.cc("click",(function(){h.uc(n);var t=e.$implicit;return h.gc(2).openResidentsDialog(t)})),h.Fc(2),h.hc(3,"translate"),h.Tb(),h.Tb()}if(2&t){var a=e.$implicit;h.Cb(1),h.mc("disabled",a.residents.length<1),h.Cb(1),h.Hc(" ",h.jc(3,2,null!=a.residents&&a.residents.length?"LOCATIONS.RESIDENTS":"LOCATIONS.NO_RESIDENTS",h.pc(5,j,null==a.residents?null:a.residents.length))," ")}}function z(t,e){1&t&&h.Pb(0,"tr",21)}function V(t,e){if(1&t){var n=h.Vb();h.Ub(0,"tr",22),h.cc("prefetch",(function(){h.uc(n);var t=e.$implicit;return h.gc(2).prefetchResidentsOnHover(t)})),h.Tb()}2&t&&h.mc("prefetchHovered",!0)}function Y(t,e){if(1&t){var n=h.Vb();h.Ub(0,"mat-paginator",23),h.cc("page",(function(t){return h.uc(n),h.gc(2).changePage(t)})),h.hc(1,"async"),h.hc(2,"async"),h.Tb()}if(2&t){var a=h.gc(2);h.mc("pageIndex",h.ic(1,3,a.currentPage$)-1)("length",h.ic(2,5,a.totalLocations$))("pageSize",a.pageSize)}}function B(t,e){if(1&t&&(h.Sb(0),h.Ub(1,"div",3),h.Ub(2,"div",4),h.Ub(3,"table",5),h.Sb(4,6),h.Dc(5,w,3,3,"th",7),h.Dc(6,P,2,4,"td",8),h.Rb(),h.Sb(7,9),h.Dc(8,k,3,3,"th",7),h.Dc(9,A,2,4,"td",8),h.Rb(),h.Sb(10,10),h.Dc(11,$,3,3,"th",7),h.Dc(12,M,2,1,"td",11),h.Rb(),h.Sb(13,12),h.Dc(14,G,3,3,"th",7),h.Dc(15,_,2,1,"td",11),h.Rb(),h.Sb(16,13),h.Dc(17,H,3,3,"th",7),h.Dc(18,x,4,7,"td",11),h.Rb(),h.Dc(19,z,1,0,"tr",14),h.Dc(20,V,1,1,"tr",15),h.Tb(),h.Tb(),h.Dc(21,Y,3,7,"mat-paginator",16),h.Tb(),h.Rb()),2&t){var n=e.ngIf,a=h.gc();h.Cb(3),h.mc("dataSource",n),h.Cb(16),h.mc("matHeaderRowDef",a.displayedColumns),h.Cb(1),h.mc("matRowDefColumns",a.displayedColumns),h.Cb(1),h.mc("ngIf",!!n.length)}}var q,J=((q=function(){function e(n,a,c){t(this,e),this.store=n,this.router=a,this.dialog=c,this.dataState$=this.store.select(u.d.getDataState),this.locations$=this.store.select(u.d.getLocations),this.totalLocations$=this.store.select(u.d.getTotalLocations),this.currentPage$=this.store.select(u.d.getCurrentPage),this.dataStateTypes=d.d,this.pageSize=d.f,this.displayedColumns=["id","name","type","dimension","residents"],this.hoverLocation$=new l.a}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.hoverLocation$.pipe(Object(m.h)(this),Object(b.a)(300),Object(f.a)((function(t){return t.id}))).subscribe((function(e){return t.store.dispatch(u.b.hoverLocationLine({location:e}))}))}},{key:"prefetchResidentsOnHover",value:function(t){this.hoverLocation$.next(t)}},{key:"changePage",value:function(t){this.router.navigate([],{queryParams:{page:t.pageIndex+1},queryParamsHandling:"merge"})}},{key:"openResidentsDialog",value:function(t){this.dialog.open(p.a,{data:{title:t.name,characterIds:t.residents}})}},{key:"ngOnDestroy",value:function(){this.dialog.closeAll()}}]),e}()).\u0275fac=function(t){return new(t||q)(h.Ob(g.h),h.Ob(s.f),h.Ob(I.b))},q.\u0275cmp=h.Ib({type:q,selectors:[["app-locations-list"]],decls:5,vars:6,consts:[[4,"ngIf"],["class","progress-bar--top","mode","indeterminate",4,"ngIf"],["mode","indeterminate",1,"progress-bar--top"],[1,"content"],[1,"table-responsive"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","pointer-cursor",3,"routerLink",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","type"],["mat-cell","",4,"matCellDef"],["matColumnDef","dimension"],["matColumnDef","residents"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"prefetchHovered","prefetch",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageIndex","length","pageSize","page",4,"ngIf"],["mat-header-cell",""],["mat-cell","",1,"pointer-cursor",3,"routerLink"],["mat-cell",""],["mat-stroked-button","","color","primary",1,"residents-button",3,"disabled","click"],["mat-header-row",""],["mat-row","",3,"prefetchHovered","prefetch"],["showFirstLastButtons","",3,"pageIndex","length","pageSize","page"]],template:function(t,e){1&t&&(h.Pb(0,"app-locations-filter-form"),h.Dc(1,R,2,1,"ng-container",0),h.hc(2,"async"),h.Dc(3,B,22,4,"ng-container",0),h.hc(4,"async")),2&t&&(h.Cb(1),h.mc("ngIf",h.ic(2,2,e.dataState$)),h.Cb(2),h.mc("ngIf",h.ic(4,4,e.locations$)))},directives:[v,r.l,y.a,L.j,L.c,L.e,L.b,L.g,L.i,L.d,L.a,s.g,D.b,L.f,L.h,F.a,N.a],pipes:[r.b,C.c],styles:[".content[_ngcontent-%COMP%]{margin-top:24px}.pointer-cursor[_ngcontent-%COMP%]{cursor:pointer}.residents-button[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),q),X=c("SRnY"),K=c("f0Cb"),Q=c("HQHz");function W(t,e){1&t&&h.Pb(0,"mat-progress-bar",2)}function Z(t,e){if(1&t&&(h.Sb(0),h.Dc(1,W,1,0,"mat-progress-bar",1),h.Rb()),2&t){var n=e.ngIf,a=h.gc();h.Cb(1),h.mc("ngIf",n===a.dataStateTypes.LOADING||n===a.dataStateTypes.REFRESHING)}}function tt(t,e){1&t&&h.Pb(0,"mat-progress-bar",6)}function et(t,e){if(1&t&&(h.Ub(0,"div",10),h.Pb(1,"app-character-mini-card",11),h.Tb()),2&t){var n=e.$implicit;h.Cb(1),h.mc("character",n)}}function nt(t,e){if(1&t&&(h.Sb(0),h.Dc(1,et,2,1,"div",9),h.Rb()),2&t){var n=h.gc().ngIf,a=h.gc(3);h.Cb(1),h.mc("ngForOf",n)("ngForTrackBy",null==a.character?null:a.character.id)}}function at(t,e){1&t&&(h.Ub(0,"p"),h.Fc(1),h.hc(2,"translate"),h.Tb()),2&t&&(h.Cb(1),h.Gc(h.ic(2,1,"LOCATIONS.NO_RESIDENTS")))}function ct(t,e){if(1&t&&h.Dc(0,at,3,3,"p",0),2&t){var n=h.gc(2).ngIf,a=h.gc(2);h.mc("ngIf",n===a.dataStateTypes.LOADED)}}function it(t,e){if(1&t&&(h.Sb(0),h.Dc(1,nt,2,2,"ng-container",7),h.Dc(2,ct,1,1,"ng-template",null,8,h.Ec),h.Rb()),2&t){var n=e.ngIf,a=h.sc(3);h.Cb(1),h.mc("ngIf",!!n.length)("ngIfElse",a)}}function rt(t,e){if(1&t&&(h.Ub(0,"div",4),h.Dc(1,tt,1,0,"mat-progress-bar",5),h.Dc(2,it,4,2,"ng-container",0),h.hc(3,"async"),h.Tb()),2&t){var n=e.ngIf,a=h.gc(2);h.Cb(1),h.mc("ngIf",n===a.dataStateTypes.LOADING),h.Cb(1),h.mc("ngIf",h.ic(3,2,a.characters$))}}var ot=function(t){return{name:t}};function st(t,e){if(1&t&&(h.Sb(0),h.Ub(1,"h1"),h.Fc(2),h.Tb(),h.Ub(3,"h3"),h.Fc(4),h.hc(5,"translate"),h.Tb(),h.Ub(6,"h3"),h.Fc(7),h.hc(8,"translate"),h.Tb(),h.Pb(9,"mat-divider"),h.Ub(10,"mat-card"),h.Ub(11,"h2"),h.Fc(12),h.hc(13,"translate"),h.Tb(),h.Dc(14,rt,4,4,"div",3),h.hc(15,"async"),h.Tb(),h.Rb()),2&t){var n=e.ngIf,a=h.gc();h.Cb(2),h.Gc(n.name),h.Cb(2),h.Ic("",h.ic(5,7,"LOCATIONS.FIELDS.TYPE"),": ",n.type,""),h.Cb(3),h.Ic("",h.ic(8,9,"LOCATIONS.FIELDS.DIMENSION")," ",n.dimension,""),h.Cb(5),h.Gc(h.jc(13,11,"LOCATIONS.LOCATION_RESIDENTS",h.pc(16,ot,n.name))),h.Cb(2),h.mc("ngIf",h.ic(15,14,a.charactersDataState$))}}var lt,bt,ft,dt=[{path:"",component:J},{path:":id",component:(lt=function(){function e(n){t(this,e),this.store=n,this.dataState$=this.store.select(u.d.getDataState),this.location$=this.store.select(u.d.getSelectedLocation),this.charactersDataState$=this.store.select(X.a.getDataState),this.characters$=this.store.select(X.a.getCharactersOfSelectedLocation),this.dataStateTypes=d.d}return n(e,[{key:"ngOnInit",value:function(){}}]),e}(),lt.\u0275fac=function(t){return new(t||lt)(h.Ob(g.h))},lt.\u0275cmp=h.Ib({type:lt,selectors:[["app-location-details"]],decls:4,vars:6,consts:[[4,"ngIf"],["class","progress-bar--top","mode","indeterminate",4,"ngIf"],["mode","indeterminate",1,"progress-bar--top"],["class","row",4,"ngIf"],[1,"row"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"],[4,"ngIf","ngIfElse"],["emptyCharacters",""],["class","col-12 col-md-6",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-12","col-md-6"],[3,"character"]],template:function(t,e){1&t&&(h.Dc(0,Z,2,1,"ng-container",0),h.hc(1,"async"),h.Dc(2,st,16,18,"ng-container",0),h.hc(3,"async")),2&t&&(h.mc("ngIf",h.ic(1,2,e.dataState$)),h.Cb(2),h.mc("ngIf",h.ic(3,4,e.location$)))},directives:[r.l,y.a,K.a,O.a,r.k,Q.a],pipes:[r.b,C.c],styles:[".mat-divider[_ngcontent-%COMP%]{margin-bottom:24px}"],changeDetection:0}),lt)}],mt=((ft=function e(){t(this,e)}).\u0275mod=h.Mb({type:ft}),ft.\u0275inj=h.Lb({factory:function(t){return new(t||ft)},imports:[[s.j.forChild(dt)],s.j]}),ft),ut=((bt=function e(){t(this,e)}).\u0275mod=h.Mb({type:bt}),bt.\u0275inj=h.Lb({factory:function(t){return new(t||bt)},imports:[[r.c,mt,o.a]]}),bt)}}])}();