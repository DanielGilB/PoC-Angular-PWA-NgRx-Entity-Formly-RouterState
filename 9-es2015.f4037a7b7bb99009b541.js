(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{ANty:function(t,e,n){"use strict";n.r(e),n.d(e,"LocationsModule",(function(){return st}));var c=n("ofXK"),a=n("PCNd"),i=n("tyNb"),o=n("XNiG"),s=n("Kj3r"),r=n("02Lk"),l=n("TwVa"),b=n("iFvM"),d=n("Ns9j"),m=n("ub1J"),f=n("fXoL"),p=n("l7P3"),h=n("0IaG"),g=n("3Pt+"),u=n("sYmb"),I=n("Wp6s"),S=n("bTqV"),C=n("/2Tz");let O=(()=>{class t{constructor(t){this.translate=t,this.FORM_GROUP_ID=l.e.FORM_LOCATIONS_FILTER_ID,this.initialModel={},this.form=new g.h({}),this.fields=[],this.options={}}ngOnInit(){this.initForm()}resetFilter(){this.form.patchValue({name:void 0,type:void 0,dimension:void 0})}initForm(){this.fields=[{fieldGroupClassName:"flex-container no-margin no-padding",fieldGroup:[{key:"name",type:"input",className:"flex-25",templateOptions:{floatLabel:"always",label:this.translate.instant("LOCATIONS.FIELDS.NAME")}},{key:"type",type:"input",className:"flex-25",templateOptions:{floatLabel:"always",label:this.translate.instant("LOCATIONS.FIELDS.TYPE")}},{key:"dimension",type:"input",className:"flex-25",templateOptions:{floatLabel:"always",label:this.translate.instant("LOCATIONS.FIELDS.DIMENSION")}}]}]}}return t.\u0275fac=function(e){return new(e||t)(f.Ob(u.d))},t.\u0275cmp=f.Ib({type:t,selectors:[["app-locations-filter-form"]],decls:10,vars:12,consts:[["mat-button","",3,"click"],[3,"formId","form","fields","initialModel","options","filter"]],template:function(t,e){1&t&&(f.Ub(0,"mat-card"),f.Ub(1,"mat-card-header"),f.Ub(2,"mat-card-title"),f.Fc(3),f.hc(4,"translate"),f.Tb(),f.Ub(5,"button",0),f.cc("click",(function(){return e.resetFilter()})),f.Fc(6),f.hc(7,"translate"),f.Tb(),f.Tb(),f.Ub(8,"mat-card-content"),f.Pb(9,"app-dynamic-form",1),f.Tb(),f.Tb()),2&t&&(f.Cb(3),f.Gc(f.ic(4,8,"LOCATIONS.FILTER_LOCATIONS")),f.Cb(3),f.Gc(f.ic(7,10,"FORMS.CLEAR_FILTER")),f.Cb(3),f.mc("formId",e.FORM_GROUP_ID)("form",e.form)("fields",e.fields)("initialModel",e.initialModel)("options",e.options)("filter",!0))},directives:[I.a,I.d,I.g,S.b,I.c,C.a],pipes:[u.c],styles:[".mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:16px}.mat-card[_ngcontent-%COMP%]{margin:0}"],changeDetection:0}),t})();var D=n("bv9b"),T=n("+0xr"),L=n("5/t5"),y=n("M9IT");function F(t,e){1&t&&f.Pb(0,"mat-progress-bar",2)}function N(t,e){if(1&t&&(f.Sb(0),f.Dc(1,F,1,0,"mat-progress-bar",1),f.Rb()),2&t){const t=e.ngIf,n=f.gc();f.Cb(1),f.mc("ngIf",t===n.dataStateTypes.LOADING||t===n.dataStateTypes.REFRESHING)}}function E(t,e){1&t&&(f.Ub(0,"th",17),f.Fc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Gc(f.ic(2,1,"LOCATIONS.FIELDS.NUM")))}const R=function(t){return["/locations",t]};function v(t,e){if(1&t&&(f.Ub(0,"td",18),f.Fc(1),f.Tb()),2&t){const t=e.$implicit;f.mc("routerLink",f.pc(2,R,t.id)),f.Cb(1),f.Hc(" ",t.id," ")}}function w(t,e){1&t&&(f.Ub(0,"th",17),f.Fc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Gc(f.ic(2,1,"LOCATIONS.FIELDS.NAME")))}function U(t,e){if(1&t&&(f.Ub(0,"td",18),f.Fc(1),f.Tb()),2&t){const t=e.$implicit;f.mc("routerLink",f.pc(2,R,t.id)),f.Cb(1),f.Hc(" ",t.name," ")}}function P(t,e){1&t&&(f.Ub(0,"th",17),f.Fc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Gc(f.ic(2,1,"LOCATIONS.FIELDS.TYPE")))}function A(t,e){if(1&t&&(f.Ub(0,"td",19),f.Fc(1),f.Tb()),2&t){const t=e.$implicit;f.Cb(1),f.Gc(t.type)}}function $(t,e){1&t&&(f.Ub(0,"th",17),f.Fc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Gc(f.ic(2,1,"LOCATIONS.FIELDS.DIMENSION")))}function M(t,e){if(1&t&&(f.Ub(0,"td",19),f.Fc(1),f.Tb()),2&t){const t=e.$implicit;f.Cb(1),f.Gc(t.dimension)}}function G(t,e){1&t&&(f.Ub(0,"th",17),f.Fc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Gc(f.ic(2,1,"LOCATIONS.FIELDS.RESIDENTS")))}const k=function(t){return{number:t}};function _(t,e){if(1&t){const t=f.Vb();f.Ub(0,"td",19),f.Ub(1,"button",20),f.cc("click",(function(){f.uc(t);const n=e.$implicit;return f.gc(2).openResidentsDialog(n)})),f.Fc(2),f.hc(3,"translate"),f.Tb(),f.Tb()}if(2&t){const t=e.$implicit;f.Cb(1),f.mc("disabled",t.residents.length<1),f.Cb(1),f.Hc(" ",f.jc(3,2,null!=t.residents&&t.residents.length?"LOCATIONS.RESIDENTS":"LOCATIONS.NO_RESIDENTS",f.pc(5,k,null==t.residents?null:t.residents.length))," ")}}function H(t,e){1&t&&f.Pb(0,"tr",21)}function x(t,e){if(1&t){const t=f.Vb();f.Ub(0,"tr",22),f.cc("prefetch",(function(){f.uc(t);const n=e.$implicit;return f.gc(2).prefetchResidentsOnHover(n)})),f.Tb()}2&t&&f.mc("prefetchHovered",!0)}function j(t,e){if(1&t){const t=f.Vb();f.Ub(0,"mat-paginator",23),f.cc("page",(function(e){return f.uc(t),f.gc(2).changePage(e)})),f.hc(1,"async"),f.hc(2,"async"),f.Tb()}if(2&t){const t=f.gc(2);f.mc("pageIndex",f.ic(1,3,t.currentPage$)-1)("length",f.ic(2,5,t.totalLocations$))("pageSize",t.pageSize)}}function z(t,e){if(1&t&&(f.Sb(0),f.Ub(1,"div",3),f.Ub(2,"div",4),f.Ub(3,"table",5),f.Sb(4,6),f.Dc(5,E,3,3,"th",7),f.Dc(6,v,2,4,"td",8),f.Rb(),f.Sb(7,9),f.Dc(8,w,3,3,"th",7),f.Dc(9,U,2,4,"td",8),f.Rb(),f.Sb(10,10),f.Dc(11,P,3,3,"th",7),f.Dc(12,A,2,1,"td",11),f.Rb(),f.Sb(13,12),f.Dc(14,$,3,3,"th",7),f.Dc(15,M,2,1,"td",11),f.Rb(),f.Sb(16,13),f.Dc(17,G,3,3,"th",7),f.Dc(18,_,4,7,"td",11),f.Rb(),f.Dc(19,H,1,0,"tr",14),f.Dc(20,x,1,1,"tr",15),f.Tb(),f.Tb(),f.Dc(21,j,3,7,"mat-paginator",16),f.Tb(),f.Rb()),2&t){const t=e.ngIf,n=f.gc();f.Cb(3),f.mc("dataSource",t),f.Cb(16),f.mc("matHeaderRowDef",n.displayedColumns),f.Cb(1),f.mc("matRowDefColumns",n.displayedColumns),f.Cb(1),f.mc("ngIf",!!t.length)}}let V=(()=>{class t{constructor(t,e,n){this.store=t,this.router=e,this.dialog=n,this.dataState$=this.store.select(d.d.getDataState),this.locations$=this.store.select(d.d.getLocations),this.totalLocations$=this.store.select(d.d.getTotalLocations),this.currentPage$=this.store.select(d.d.getCurrentPage),this.dataStateTypes=l.d,this.pageSize=l.f,this.displayedColumns=["id","name","type","dimension","residents"],this.hoverLocation$=new o.a}ngOnInit(){this.hoverLocation$.pipe(Object(b.h)(this),Object(s.a)(300),Object(r.a)(({id:t})=>t)).subscribe(t=>this.store.dispatch(d.b.hoverLocationLine({location:t})))}prefetchResidentsOnHover(t){this.hoverLocation$.next(t)}changePage(t){this.router.navigate([],{queryParams:{page:t.pageIndex+1},queryParamsHandling:"merge"})}openResidentsDialog(t){this.dialog.open(m.a,{data:{title:t.name,characterIds:t.residents}})}ngOnDestroy(){this.dialog.closeAll()}}return t.\u0275fac=function(e){return new(e||t)(f.Ob(p.h),f.Ob(i.f),f.Ob(h.b))},t.\u0275cmp=f.Ib({type:t,selectors:[["app-locations-list"]],decls:5,vars:6,consts:[[4,"ngIf"],["class","progress-bar--top","mode","indeterminate",4,"ngIf"],["mode","indeterminate",1,"progress-bar--top"],[1,"content"],[1,"table-responsive"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","pointer-cursor",3,"routerLink",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","type"],["mat-cell","",4,"matCellDef"],["matColumnDef","dimension"],["matColumnDef","residents"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"prefetchHovered","prefetch",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageIndex","length","pageSize","page",4,"ngIf"],["mat-header-cell",""],["mat-cell","",1,"pointer-cursor",3,"routerLink"],["mat-cell",""],["mat-stroked-button","","color","primary",1,"residents-button",3,"disabled","click"],["mat-header-row",""],["mat-row","",3,"prefetchHovered","prefetch"],["showFirstLastButtons","",3,"pageIndex","length","pageSize","page"]],template:function(t,e){1&t&&(f.Pb(0,"app-locations-filter-form"),f.Dc(1,N,2,1,"ng-container",0),f.hc(2,"async"),f.Dc(3,z,22,4,"ng-container",0),f.hc(4,"async")),2&t&&(f.Cb(1),f.mc("ngIf",f.ic(2,2,e.dataState$)),f.Cb(2),f.mc("ngIf",f.ic(4,4,e.locations$)))},directives:[O,c.l,D.a,T.j,T.c,T.e,T.b,T.g,T.i,T.d,T.a,i.g,S.b,T.f,T.h,L.a,y.a],pipes:[c.b,u.c],styles:[".content[_ngcontent-%COMP%]{margin-top:24px}.pointer-cursor[_ngcontent-%COMP%]{cursor:pointer}.residents-button[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),t})();var Y=n("SRnY"),B=n("f0Cb"),q=n("HQHz");function J(t,e){1&t&&f.Pb(0,"mat-progress-bar",2)}function X(t,e){if(1&t&&(f.Sb(0),f.Dc(1,J,1,0,"mat-progress-bar",1),f.Rb()),2&t){const t=e.ngIf,n=f.gc();f.Cb(1),f.mc("ngIf",t===n.dataStateTypes.LOADING||t===n.dataStateTypes.REFRESHING)}}function K(t,e){1&t&&f.Pb(0,"mat-progress-bar",6)}function Q(t,e){if(1&t&&(f.Ub(0,"div",10),f.Pb(1,"app-character-mini-card",11),f.Tb()),2&t){const t=e.$implicit;f.Cb(1),f.mc("character",t)}}function W(t,e){if(1&t&&(f.Sb(0),f.Dc(1,Q,2,1,"div",9),f.Rb()),2&t){const t=f.gc().ngIf,e=f.gc(3);f.Cb(1),f.mc("ngForOf",t)("ngForTrackBy",null==e.character?null:e.character.id)}}function Z(t,e){1&t&&(f.Ub(0,"p"),f.Fc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Gc(f.ic(2,1,"LOCATIONS.NO_RESIDENTS")))}function tt(t,e){if(1&t&&f.Dc(0,Z,3,3,"p",0),2&t){const t=f.gc(2).ngIf,e=f.gc(2);f.mc("ngIf",t===e.dataStateTypes.LOADED)}}function et(t,e){if(1&t&&(f.Sb(0),f.Dc(1,W,2,2,"ng-container",7),f.Dc(2,tt,1,1,"ng-template",null,8,f.Ec),f.Rb()),2&t){const t=e.ngIf,n=f.sc(3);f.Cb(1),f.mc("ngIf",!!t.length)("ngIfElse",n)}}function nt(t,e){if(1&t&&(f.Ub(0,"div",4),f.Dc(1,K,1,0,"mat-progress-bar",5),f.Dc(2,et,4,2,"ng-container",0),f.hc(3,"async"),f.Tb()),2&t){const t=e.ngIf,n=f.gc(2);f.Cb(1),f.mc("ngIf",t===n.dataStateTypes.LOADING),f.Cb(1),f.mc("ngIf",f.ic(3,2,n.characters$))}}const ct=function(t){return{name:t}};function at(t,e){if(1&t&&(f.Sb(0),f.Ub(1,"h1"),f.Fc(2),f.Tb(),f.Ub(3,"h3"),f.Fc(4),f.hc(5,"translate"),f.Tb(),f.Ub(6,"h3"),f.Fc(7),f.hc(8,"translate"),f.Tb(),f.Pb(9,"mat-divider"),f.Ub(10,"mat-card"),f.Ub(11,"h2"),f.Fc(12),f.hc(13,"translate"),f.Tb(),f.Dc(14,nt,4,4,"div",3),f.hc(15,"async"),f.Tb(),f.Rb()),2&t){const t=e.ngIf,n=f.gc();f.Cb(2),f.Gc(t.name),f.Cb(2),f.Ic("",f.ic(5,7,"LOCATIONS.FIELDS.TYPE"),": ",t.type,""),f.Cb(3),f.Ic("",f.ic(8,9,"LOCATIONS.FIELDS.DIMENSION")," ",t.dimension,""),f.Cb(5),f.Gc(f.jc(13,11,"LOCATIONS.LOCATION_RESIDENTS",f.pc(16,ct,t.name))),f.Cb(2),f.mc("ngIf",f.ic(15,14,n.charactersDataState$))}}const it=[{path:"",component:V},{path:":id",component:(()=>{class t{constructor(t){this.store=t,this.dataState$=this.store.select(d.d.getDataState),this.location$=this.store.select(d.d.getSelectedLocation),this.charactersDataState$=this.store.select(Y.a.getDataState),this.characters$=this.store.select(Y.a.getCharactersOfSelectedLocation),this.dataStateTypes=l.d}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(f.Ob(p.h))},t.\u0275cmp=f.Ib({type:t,selectors:[["app-location-details"]],decls:4,vars:6,consts:[[4,"ngIf"],["class","progress-bar--top","mode","indeterminate",4,"ngIf"],["mode","indeterminate",1,"progress-bar--top"],["class","row",4,"ngIf"],[1,"row"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"],[4,"ngIf","ngIfElse"],["emptyCharacters",""],["class","col-12 col-md-6",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-12","col-md-6"],[3,"character"]],template:function(t,e){1&t&&(f.Dc(0,X,2,1,"ng-container",0),f.hc(1,"async"),f.Dc(2,at,16,18,"ng-container",0),f.hc(3,"async")),2&t&&(f.mc("ngIf",f.ic(1,2,e.dataState$)),f.Cb(2),f.mc("ngIf",f.ic(3,4,e.location$)))},directives:[c.l,D.a,B.a,I.a,c.k,q.a],pipes:[c.b,u.c],styles:[".mat-divider[_ngcontent-%COMP%]{margin-bottom:24px}"],changeDetection:0}),t})()}];let ot=(()=>{class t{}return t.\u0275mod=f.Mb({type:t}),t.\u0275inj=f.Lb({factory:function(e){return new(e||t)},imports:[[i.j.forChild(it)],i.j]}),t})(),st=(()=>{class t{}return t.\u0275mod=f.Mb({type:t}),t.\u0275inj=f.Lb({factory:function(e){return new(e||t)},imports:[[c.c,ot,a.a]]}),t})()}}]);